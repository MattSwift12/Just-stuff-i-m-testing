import streamlit as st
from deep_translator import GoogleTranslator, MyMemoryTranslator

# --- Configuraci贸n de la p谩gina ---
st.set_page_config(page_title="Comparador de Traducci贸n", layout="wide", page_icon="")

# --- T铆tulo y Descripci贸n ---
st.title(" Comparador de Motores de Traducci贸n")
st.markdown("""
Esta herramienta permite comparar la calidad de traducci贸n de diferentes motores 
de Inteligencia Artificial en tiempo real. Ideal para post-edici贸n y an谩lisis ling眉铆stico.
""")

# --- Barra Lateral (Sidebar) ---
with st.sidebar:
    st.header("锔 Configuraci贸n")
    st.write("Selecciona los idiomas:")
    
    # Diccionario de idiomas (puedes a帽adir m谩s c贸digos ISO 639-1)
    languages = {
        'Espa帽ol': 'es', 
        'Ingl茅s': 'en', 
        'Chino (Simplificado)': 'zh-CN', 
        'Franc茅s': 'fr', 
        'Alem谩n': 'de',
        'Italiano': 'it',
        'Portugu茅s': 'pt'
    }
    
    source_lang_name = st.selectbox("Idioma de origen", list(languages.keys()), index=0)
    target_lang_name = st.selectbox("Idioma de destino", list(languages.keys()), index=1)

    # Obtenemos los c贸digos (ej. 'es', 'en')
    source_code = languages[source_lang_name]
    target_code = languages[target_lang_name]
    
    st.divider()
    st.info("Desarrollado con Python y Streamlit.")

# --- rea Principal ---
st.subheader("Texto Original")
source_text = st.text_area("Ingresa el texto a traducir:", height=150, placeholder="Escribe o pega tu texto aqu铆...")

# Bot贸n de acci贸n
if st.button(" Traducir ahora", type="primary"):
    if source_text:
        st.divider()
        st.subheader("Resultados Comparativos")
        
        # Creamos columnas para ver los resultados uno al lado del otro
        col1, col2 = st.columns(2)

        # MOTOR 1: Google Translate
        with col1:
            st.markdown("###  Google Translate")
            try:
                trans_google = GoogleTranslator(source=source_code, target=target_code).translate(source_text)
                st.success(trans_google)
            except Exception as e:
                st.error(f"Error de conexi贸n: {e}")

        # MOTOR 2: MyMemory (Memoria de traducci贸n colaborativa)
        with col2:
            st.markdown("###  MyMemory (Human/Machine)")
            try:
                trans_memory = MyMemoryTranslator(source=source_code, target=target_code).translate(source_text)
                st.info(trans_memory)
            except Exception as e:
                st.warning(f"No se encontr贸 coincidencia o error: {e}")
                
    else:
        st.warning("锔 Por favor ingresa un texto para comenzar.")
